import { imageOptionsSchema } from '@cloudinary-util/url-loader/dist/schema';
import { zodToJsonSchema } from 'zod-to-json-schema';


# Image

export const Test = ({ schema }) => {
  const properties = schema.definitions.imageOptions.properties;
  console.log('properties', properties);
  return (
    <>
      <table>
        <thead>
          <tr>
            <td><strong>Property</strong></td>
            <td><strong>Types</strong></td>
            <td><strong>Default</strong></td>
            <td><strong>Description</strong></td>
            <td></td>
          </tr>
        </thead>
        <tbody>
        {Object.entries(properties).map(([property, configuration]) => {
          const { type, anyOf, default: defaultValue } = configuration;

          let types = type || [];

          if ( types && !Array.isArray(types) ) {
            types = [types];
          }

          if ( anyOf ) {
            anyOf.filter(({ type }) => !!type ).forEach(ao => {
              types.push(ao.type);
            })
          }

          const description = configuration.description && JSON.parse(configuration.description);
          const { text, url } = description || {};
          
          return (
            <tr key={property}>
              <td>{ property }</td>
              <td>{ types && types.join(' | ') }</td>
              <td>{ defaultValue }</td>
              <td>{ text }</td>
              <td>
                {url && <a href={url}>More Info</a>}
              </td>
            </tr>
          )
        })}
        </tbody>
      </table>
    </>
  )
}

<Test schema={zodToJsonSchema(imageOptionsSchema, 'imageOptions')} />